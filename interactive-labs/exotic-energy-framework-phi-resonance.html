<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EEF Lab - Phi Resonance Laboratory</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: #050A30;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        
        canvas {
            display: block;
        }
        
        .range-slider {
            appearance: none;
            width: 100%;
            height: 12px;
            border-radius: 9999px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            -webkit-appearance: none;
        }
        
        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #00D1FF;
            cursor: pointer;
            box-shadow: 0 0 10px #00D1FF;
        }
        
        .range-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #00D1FF;
            cursor: pointer;
            border: none;
            box-shadow: 0 0 10px #00D1FF;
        }
        
        .locked-glow {
            animation: golden-glow 2s ease-in-out infinite;
        }
        
        @keyframes golden-glow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(34, 197, 94, 0.4);
            }
            50% {
                box-shadow: 0 0 40px rgba(34, 197, 94, 0.8);
            }
        }
    </style>
</head>
<body class="min-h-screen bg-[#050A30] text-white p-6 md:p-12 font-sans selection:bg-cyan-500/30">
    <div class="max-w-6xl mx-auto space-y-10">
        
        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-end gap-6">
            <div>
                <div class="flex items-center gap-2 mb-2">
                    <!-- Triangle Icon SVG -->
                    <svg class="text-cyan-400" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 20h20L12 2z"></path>
                    </svg>
                    <span class="text-xs font-bold text-cyan-400 uppercase tracking-[0.4em]">Phi Resonance Laboratory</span>
                </div>
                <h1 class="text-5xl font-black italic tracking-tighter uppercase">Golden Ratio Transition</h1>
                <p class="text-blue-200/60 mt-1">Modeling Tetrahedral Vertex Shifting (uud → uds)</p>
            </div>
            <div class="bg-white/5 p-8 rounded-3xl border border-white/10 text-right min-w-[260px]">
                <p class="text-[10px] uppercase font-bold text-blue-400 mb-1">State Efficiency</p>
                <p class="text-4xl font-mono text-cyan-400" id="efficiencyDisplay">0.00%</p>
            </div>
        </header>

        <!-- Visualization Canvas -->
        <div class="relative bg-black/60 rounded-[3rem] border border-white/10 h-[500px] overflow-hidden flex items-center justify-center shadow-2xl">
            <canvas id="mainCanvas" width="800" height="500" class="w-full h-full opacity-90"></canvas>
            
            <div class="absolute top-8 left-8">
                <div id="lockStatus" class="flex items-center gap-2 bg-black/40 px-4 py-2 rounded-full border border-white/10 text-white/40 transition-all">
                    <!-- Unlock Icon SVG -->
                    <svg class="unlock-icon" viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                    <span class="text-[10px] font-bold uppercase tracking-widest" id="lockText">
                        Inducing State Shift
                    </span>
                </div>
            </div>

            <div class="absolute bottom-8 text-center">
                <p class="text-[10px] uppercase tracking-widest font-black text-cyan-400 mb-2">Current State</p>
                <p class="text-3xl font-black italic uppercase tracking-tighter" id="stateDisplay">Proton (uud)</p>
            </div>
        </div>

        <!-- Controls -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- Left: Ratio Control -->
            <div class="lg:col-span-2 bg-white/5 rounded-[2.5rem] p-10 border border-white/10 space-y-8">
                <div class="space-y-6">
                    <div class="flex justify-between items-center">
                        <label class="text-xs font-bold text-blue-300 uppercase tracking-widest font-mono">Resonance Ratio (Baseline : Vertex)</label>
                        <span class="text-2xl font-mono text-cyan-400" id="ratioDisplay">
                            1.000
                        </span>
                    </div>
                    <input 
                        id="ratioSlider"
                        type="range" 
                        min="1.00" 
                        max="2.00" 
                        step="0.001"
                        value="1.000"
                        class="range-slider"
                    />
                </div>

                <!-- Status Indicators -->
                <div class="grid grid-cols-2 gap-6">
                    <div class="p-4 bg-white/5 rounded-2xl border border-white/10 flex items-center gap-4">
                        <!-- Music Icon SVG -->
                        <svg class="text-cyan-400" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18V5l12-2v13"></path>
                            <circle cx="6" cy="18" r="3"></circle>
                            <circle cx="18" cy="16" r="3"></circle>
                        </svg>
                        <div>
                            <p class="text-[10px] font-bold text-cyan-400 uppercase">W-Peak Energy</p>
                            <p class="text-xs text-white">80.3 GeV equivalent</p>
                        </div>
                    </div>
                    <div class="p-4 bg-white/5 rounded-2xl border border-white/10 flex items-center gap-4">
                        <!-- Zap Icon SVG -->
                        <svg class="text-purple-500" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                        </svg>
                        <div>
                            <p class="text-[10px] font-bold text-purple-400 uppercase">Strange-Shift</p>
                            <p class="text-xs text-white">Transition threshold</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right: Architect's Note -->
            <div class="bg-white/5 p-8 rounded-[2rem] border border-white/10 flex flex-col justify-center">
                <div class="flex items-center gap-3 mb-4">
                    <!-- Maximize2 Icon SVG -->
                    <svg class="text-cyan-400" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
                    </svg>
                    <h4 class="text-[10px] font-bold text-cyan-400 uppercase tracking-widest">Architect's Note</h4>
                </div>
                <p class="text-sm text-blue-100 leading-relaxed italic opacity-70">
                    "The W boson isn't a wall; it's the peak of a curve. At exactly Φ, the energy costs vanish and the logic flips into the sustain."
                </p>
            </div>

        </div>

        <footer class="pt-10 text-center opacity-20 text-[10px] uppercase tracking-[0.6em] font-bold pb-10">
            Data Legacy Vault | Christopher Olds | The Phi Interval
        </footer>

    </div>

    <script>
        // Constants
        const PHI = 1.618;
        
        // State
        let currentRatio = 1.000;
        let isLocked = false;
        let energyState = 'Proton (uud)';

        // Canvas setup
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');
        let animationFrameId;
        let time = 0;

        // Rendering function
        function render() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;

            const baseSize = 80;
            const currentSize = baseSize * currentRatio;

            ctx.lineWidth = 2;
            ctx.lineJoin = 'round';

            // Draw tetrahedron structure
            function drawTetra(size, alpha, color) {
                const points = [
                    { x: centerX, y: centerY - size }, // Top
                    { x: centerX - size * 0.86, y: centerY + size * 0.5 }, // Bottom Left
                    { x: centerX + size * 0.86, y: centerY + size * 0.5 }, // Bottom Right
                    { x: centerX, y: centerY + size * 0.2 } // Depth center
                ];

                ctx.strokeStyle = color;
                ctx.globalAlpha = alpha;

                // Front face
                ctx.beginPath();
                ctx.moveTo(points[0].x, points[0].y);
                ctx.lineTo(points[1].x, points[1].y);
                ctx.lineTo(points[2].x, points[2].y);
                ctx.closePath();
                ctx.stroke();

                // Depth lines
                points.forEach((p, i) => {
                    if (i === 3) return;
                    ctx.beginPath();
                    ctx.moveTo(p.x, p.y);
                    ctx.lineTo(points[3].x, points[3].y);
                    ctx.stroke();
                });

                return points;
            }

            // Draw baseline (ghost)
            drawTetra(baseSize, 0.1, '#FFFFFF');

            // Draw active transition state
            const resonanceColor = isLocked ? '#FFFFFF' : '#00D1FF';
            const points = drawTetra(currentSize, isLocked ? 1.0 : 0.6, resonanceColor);

            // Glow effect if locked
            if (isLocked) {
                ctx.shadowBlur = 40;
                ctx.shadowColor = '#00D1FF';
                drawTetra(currentSize, 0.4, '#00D1FF');
                ctx.shadowBlur = 0;
            }

            // Draw quarks at vertices
            function drawQuark(x, y, flavor) {
                ctx.fillStyle = flavor === 's' ? '#A855F7' : '#00D1FF';
                ctx.globalAlpha = 1.0;
                ctx.beginPath();
                ctx.arc(x, y, 6, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#FFFFFF';
                ctx.font = 'bold 8px Inter';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(flavor, x, y);
            }

            const vertexPoints = [
                { x: centerX, y: centerY - currentSize },
                { x: centerX - currentSize * 0.86, y: centerY + currentSize * 0.5 },
                { x: centerX + currentSize * 0.86, y: centerY + currentSize * 0.5 }
            ];

            drawQuark(vertexPoints[0].x, vertexPoints[0].y, 'u');
            drawQuark(vertexPoints[1].x, vertexPoints[1].y, 'u');
            drawQuark(vertexPoints[2].x, vertexPoints[2].y, isLocked ? 's' : 'd');

            time += 0.05;
            animationFrameId = window.requestAnimationFrame(render);
        }

        // Update UI based on ratio
        function updateUI() {
            // Check if locked to golden ratio
            if (Math.abs(currentRatio - PHI) < 0.02) {
                isLocked = true;
                currentRatio = PHI;
                energyState = 'Lambda (uds)';
            } else {
                isLocked = false;
                energyState = currentRatio > 1.3 ? 'Transition (W-state)' : 'Proton (uud)';
            }

            // Update displays
            const ratioDisplay = document.getElementById('ratioDisplay');
            if (isLocked) {
                ratioDisplay.innerHTML = `${currentRatio.toFixed(3)} <span class="text-green-400">(Φ)</span>`;
                ratioDisplay.className = 'text-2xl font-mono text-green-400';
            } else {
                ratioDisplay.textContent = currentRatio.toFixed(3);
                ratioDisplay.className = 'text-2xl font-mono text-cyan-400';
            }

            // Update efficiency
            const efficiency = isLocked ? 99.99 : (100 - Math.abs(currentRatio - PHI) * 100);
            document.getElementById('efficiencyDisplay').textContent = efficiency.toFixed(2) + '%';

            // Update lock status
            const lockStatus = document.getElementById('lockStatus');
            const lockText = document.getElementById('lockText');
            
            if (isLocked) {
                lockStatus.classList.remove('border-white/10', 'text-white/40');
                lockStatus.classList.add('border-green-500', 'text-green-400', 'locked-glow');
                lockText.textContent = 'Golden Fret Locked';
                
                // Change lock icon to lock
                document.querySelector('.unlock-icon').innerHTML = '<circle cx="12" cy="16" r="1"></circle><path d="M9 10h6a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2z"></path><path d="M7 10V7a5 5 0 0 1 10 0v3"></path>';
            } else {
                lockStatus.classList.remove('border-green-500', 'text-green-400', 'locked-glow');
                lockStatus.classList.add('border-white/10', 'text-white/40');
                lockText.textContent = 'Inducing State Shift';
            }

            // Update state display
            document.getElementById('stateDisplay').textContent = energyState;
        }

        // Event listeners
        document.getElementById('ratioSlider').addEventListener('input', (e) => {
            currentRatio = parseFloat(e.target.value);
            updateUI();
        });

        // Initialize
        render();
        updateUI();
    </script>
</body>
</html>
