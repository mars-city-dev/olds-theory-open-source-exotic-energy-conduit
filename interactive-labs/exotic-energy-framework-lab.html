<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EEF.LAB | Exotic Energy Framework</title>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Space+Mono&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-mono { font-family: 'Space Mono', monospace; }
    </style>
</head>
<body class="bg-[#050A30] text-slate-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // --- ICON ADAPTER ---
        const Icon = ({ name, size = 24, className = "" }) => {
            const containerRef = useRef(null);
            
            useEffect(() => {
                if (window.lucide && containerRef.current) {
                    const iconDef = lucide.icons[name];
                    if (iconDef) {
                        const svg = lucide.createElement(iconDef);
                        svg.setAttribute('width', size);
                        svg.setAttribute('height', size);
                        svg.style.stroke = "currentColor"; 
                        if (className) svg.setAttribute('class', `lucide lucide-${name.toLowerCase()} ${className}`);
                        
                        containerRef.current.innerHTML = '';
                        containerRef.current.appendChild(svg);
                    }
                }
            }, [name, size, className]);

            return <span ref={containerRef} className="inline-flex items-center justify-center" />;
        };

        // Icon Components
        const Cpu = (p) => <Icon name="Cpu" {...p} />;
        const Zap = (p) => <Icon name="Zap" {...p} />;
        const Wind = (p) => <Icon name="Wind" {...p} />;
        const Music = (p) => <Icon name="Music" {...p} />;
        const Info = (p) => <Icon name="Info" {...p} />;
        const RefreshCw = (p) => <Icon name="RefreshCw" {...p} />;
        const Gauge = (p) => <Icon name="Gauge" {...p} />;
        const Database = (p) => <Icon name="Database" {...p} />;

        // --- SIMULATION COMPONENTS ---

        // 1. Lattice Simulator (Canvas-based)
        const LatticeLab = () => {
            const canvasRef = useRef(null);
            const [frequency, setFrequency] = useState(10.24);
            const [isResonating, setIsResonating] = useState(false);
            const [flipCount, setFlipCount] = useState(0);

            useEffect(() => {
                const canvas = canvasRef.current;
                if (!canvas) return;
                const ctx = canvas.getContext('2d');
                let animationFrameId;

                const particles = Array.from({ length: 15 }, () => ({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: Math.random() * 2 + 1,
                    state: 'proton',
                    pulse: 0
                }));

                const render = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // Draw Lattice Grid
                    ctx.strokeStyle = 'rgba(0, 209, 255, 0.1)';
                    ctx.lineWidth = 1;
                    for(let i = 0; i < canvas.width; i += 40) {
                        ctx.beginPath();
                        ctx.moveTo(i, 0);
                        ctx.lineTo(i, canvas.height);
                        ctx.stroke();
                    }
                    for(let i = 0; i < canvas.height; i += 40) {
                        ctx.beginPath();
                        ctx.moveTo(0, i);
                        ctx.lineTo(canvas.width, i);
                        ctx.stroke();
                    }

                    // Update and Draw Particles
                    particles.forEach(p => {
                        p.x += p.vx;
                        if (p.x > canvas.width) {
                            p.x = -10;
                            if (isResonating && Math.random() > 0.3) {
                                p.state = 'lambda';
                                setFlipCount(prev => prev + 1);
                            } else {
                                p.state = 'proton';
                            }
                        }

                        // Particle Glow
                        const gradient = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, 15);
                        if (p.state === 'proton') {
                            gradient.addColorStop(0, 'rgba(0, 64, 230, 0.8)');
                            gradient.addColorStop(1, 'rgba(0, 64, 230, 0)');
                        } else {
                            gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');
                            gradient.addColorStop(0.5, 'rgba(0, 209, 255, 0.8)');
                            gradient.addColorStop(1, 'rgba(0, 209, 255, 0)');
                        }

                        ctx.fillStyle = gradient;
                        ctx.beginPath();
                        ctx.arc(p.x, p.y, 15, 0, Math.PI * 2);
                        ctx.fill();

                        // Quark labels
                        ctx.fillStyle = p.state === 'proton' ? 'white' : '#050A30';
                        ctx.font = 'bold 8px Inter';
                        ctx.fillText(p.state === 'proton' ? 'uud' : 'uds', p.x - 8, p.y + 3);
                    });

                    animationFrameId = window.requestAnimationFrame(render);
                };

                render();
                return () => window.cancelAnimationFrame(animationFrameId);
            }, [isResonating]);

            return (
                <div className="space-y-6">
                    <div className="flex justify-between items-center">
                        <div>
                            <h2 className="text-2xl font-bold text-white">Baryonic Tuning Lattice</h2>
                            <p className="text-sm text-blue-200/60">Inducing flavor-flips via Harmonic Induction</p>
                        </div>
                        <div className="text-right">
                            <p className="text-xs uppercase font-bold text-blue-400">Integrated Flips</p>
                            <p className="text-2xl font-mono">{flipCount.toLocaleString()}</p>
                        </div>
                    </div>

                    <div className="relative bg-black/40 rounded-3xl border border-white/10 overflow-hidden">
                        <canvas ref={canvasRef} width={800} height={300} className="w-full h-auto" />
                        <div className="absolute top-4 left-4 flex gap-2">
                            <div className={`px-3 py-1 rounded-full text-[10px] font-bold ${isResonating ? 'bg-cyan-500 text-black animate-pulse' : 'bg-white/10 text-white'}`}>
                                {isResonating ? 'RESONANCE ACTIVE' : 'LATTICE IDLE'}
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="bg-white/5 p-6 rounded-2xl border border-white/10">
                            <label className="block text-xs font-bold text-blue-300 uppercase mb-4 tracking-widest">Resonance Frequency (THz)</label>
                            <input 
                                type="range" min="1" max="20" step="0.01" 
                                value={frequency} 
                                onChange={(e) => setFrequency(parseFloat(e.target.value))}
                                className="w-full h-2 bg-white/10 rounded-lg appearance-none cursor-pointer accent-cyan-400"
                            />
                            <div className="flex justify-between mt-2 font-mono text-sm">
                                <span>1.00</span>
                                <span className="text-cyan-400">{frequency.toFixed(2)}</span>
                                <span>20.00</span>
                            </div>
                        </div>
                        <button 
                            onClick={() => setIsResonating(!isResonating)}
                            className={`rounded-2xl font-bold transition-all flex items-center justify-center gap-2 ${isResonating ? 'bg-white text-black' : 'bg-cyan-500 text-black hover:bg-white'}`}
                        >
                            <Music size={20} />
                            {isResonating ? 'DAMPEN LATTICE' : 'INITIATE HARMONICS'}
                        </button>
                    </div>
                </div>
            );
        };

        // 2. ISP Calculator
        const ISPCalculator = () => {
            const [inputValue, setInputValue] = useState(100);
            const reclaimed = inputValue * 0.98;
            const totalEfficiency = ((inputValue + reclaimed) / (inputValue || 1)) * 50; 

            return (
                <div className="space-y-6">
                    <div className="flex items-center gap-3">
                        <Zap className="text-cyan-400" />
                        <h2 className="text-2xl font-bold text-white">Integrated State-Power Efficiency</h2>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div className="bg-white/5 p-6 rounded-2xl border border-white/10 flex flex-col justify-center">
                            <p className="text-[10px] uppercase font-bold text-blue-400 mb-2">Energy Input (U<sub>input</sub>)</p>
                            <input 
                                type="number" 
                                value={inputValue} 
                                onChange={(e) => setInputValue(Number(e.target.value))}
                                className="bg-transparent text-4xl font-mono text-white outline-none"
                            />
                            <p className="text-xs text-blue-200/40 mt-1">Joules per state-cycle</p>
                        </div>

                        <div className="bg-white/5 p-6 rounded-2xl border border-white/10 flex flex-col justify-center">
                            <p className="text-[10px] uppercase font-bold text-green-400 mb-2">Reclaimed (ΔS<sub>reclaimed</sub>)</p>
                            <p className="text-4xl font-mono text-green-400">+{reclaimed.toFixed(1)}</p>
                            <p className="text-xs text-blue-200/40 mt-1">State-Shift Dividend</p>
                        </div>

                        <div className="bg-cyan-500 p-6 rounded-2xl flex flex-col justify-center">
                            <p className="text-[10px] uppercase font-bold text-black/60 mb-2">ISP Index (E<sub>ISP</sub>)</p>
                            <p className="text-4xl font-black text-[#050A30]">{(totalEfficiency).toFixed(2)}%</p>
                            <p className="text-xs text-black/40 mt-1">Thermodynamic Advantage</p>
                        </div>
                    </div>

                    <div className="p-6 bg-black/20 rounded-2xl border border-white/5 italic text-sm text-blue-200/60 leading-relaxed">
                        "By integrating logic into the carrier's identity, the 'cost' of computation is held as potential energy and returned to the grid. In a classical system, this reclaimed value would be zero (lost to heat)."
                    </div>
                </div>
            );
        };

        // 3. Casimir Drive Sandbox
        const CasimirSandbox = () => {
            const [isEngaged, setIsEngaged] = useState(false);

            return (
                <div className="space-y-6">
                    <div className="flex items-center gap-3">
                        <Wind className="text-cyan-400" />
                        <h2 className="text-2xl font-bold text-white">Harmonic Casimir Drive (HCD)</h2>
                    </div>

                    <div className="h-64 bg-black/60 rounded-3xl relative overflow-hidden flex items-center justify-center">
                        <div className="absolute inset-0 opacity-10 bg-[radial-gradient(#00D1FF_1px,transparent_1px)] [background-size:20px_20px]"></div>
                        
                        <div className={`transition-all duration-1000 flex items-center ${isEngaged ? 'translate-x-12' : 'translate-x-0'}`}>
                            <div className={`w-32 h-8 rounded-full bg-gradient-to-r from-blue-900 to-cyan-500 relative flex items-center justify-center border border-white/20 shadow-[0_0_50px_rgba(0,209,255,0.2)]`}>
                                <div className={`absolute -right-4 w-8 h-12 bg-cyan-400/20 blur-xl rounded-full transition-opacity ${isEngaged ? 'opacity-100' : 'opacity-0'}`} />
                                <div className="w-1/2 h-1 bg-white/40 rounded-full blur-[1px]"></div>
                            </div>
                        </div>

                        <div className="absolute top-4 right-4 text-right">
                            <p className="text-[10px] font-bold text-blue-400">VACUUM GRADIENT</p>
                            <p className="text-lg font-mono">{isEngaged ? 'ΔP: 0.999' : 'ΔP: 0.000'}</p>
                        </div>
                    </div>

                    <div className="bg-white/5 p-6 rounded-2xl border border-white/10">
                        <button 
                            onMouseDown={() => setIsEngaged(true)}
                            onMouseUp={() => setIsEngaged(false)}
                            onMouseLeave={() => setIsEngaged(false)}
                            onTouchStart={() => setIsEngaged(true)}
                            onTouchEnd={() => setIsEngaged(false)}
                            className={`w-full py-6 rounded-2xl font-black text-xl transition-all shadow-xl flex items-center justify-center gap-3 ${
                                isEngaged 
                                ? 'bg-white text-[#050A30] scale-95' 
                                : 'bg-cyan-500 text-[#050A30] hover:bg-white'
                            }`}
                        >
                            <RefreshCw className={isEngaged ? 'animate-spin' : ''} />
                            {isEngaged ? 'HARMONICS ACTIVE' : 'ENGAGE CASIMIR DRIVE'}
                        </button>
                        <p className="text-[10px] text-center mt-4 text-blue-200/40 uppercase font-bold tracking-widest">Hold to Deplete Forward Vacuum Density</p>
                    </div>
                </div>
            );
        };

        // --- MAIN APP ---
        const App = () => {
            const [activeTab, setActiveTab] = useState('lattice');

            return (
                <div className="min-h-screen bg-[#050A30] text-slate-100 font-sans">
                    <div className="max-w-7xl mx-auto flex flex-col md:flex-row min-h-screen">
                        
                        {/* Sidebar */}
                        <nav className="w-full md:w-80 bg-black/40 border-b md:border-b-0 md:border-r border-white/10 p-8 flex flex-col">
                            <div className="mb-12">
                                <h1 className="text-2xl font-black tracking-tighter text-cyan-400 italic">EEF.LAB</h1>
                                <p className="text-[10px] uppercase tracking-[0.2em] text-blue-300/60 font-bold">Exotic Energy Framework</p>
                            </div>

                            <div className="space-y-2 flex-grow">
                                <button 
                                    onClick={() => setActiveTab('lattice')}
                                    className={`w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all ${activeTab === 'lattice' ? 'bg-white/10 text-cyan-400' : 'hover:bg-white/5 text-slate-400'}`}
                                >
                                    <Cpu size={18} />
                                    <span className="text-sm font-semibold">Lattice Lab</span>
                                </button>
                                <button 
                                    onClick={() => setActiveTab('isp')}
                                    className={`w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all ${activeTab === 'isp' ? 'bg-white/10 text-cyan-400' : 'hover:bg-white/5 text-slate-400'}`}
                                >
                                    <Zap size={18} />
                                    <span className="text-sm font-semibold">ISP Calculator</span>
                                </button>
                                <button 
                                    onClick={() => setActiveTab('casimir')}
                                    className={`w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all ${activeTab === 'casimir' ? 'bg-white/10 text-cyan-400' : 'hover:bg-white/5 text-slate-400'}`}
                                >
                                    <Wind size={18} />
                                    <span className="text-sm font-semibold">Casimir Sandbox</span>
                                </button>
                            </div>

                            <div className="mt-12 space-y-3 border-t border-white/10 pt-6">
                                <div className="text-[10px] uppercase font-bold text-slate-500 tracking-widest mb-4">Navigation</div>
                                <a href="/exotic-energy-framework.html" className="group block w-full px-4 py-3 bg-gradient-to-r from-purple-500/20 to-purple-500/10 hover:from-purple-500/30 hover:to-purple-500/20 border border-purple-500/30 rounded-xl text-left text-xs font-bold text-purple-300 transition-all flex items-center gap-3">
                                    <svg className="w-4 h-4 group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 19l-7-7m0 0l7-7m-7 7h18" /></svg>
                                    Research Hub
                                </a>
                                <a href="/dashboard.html" className="group block w-full px-4 py-3 bg-gradient-to-r from-blue-500/20 to-blue-500/10 hover:from-blue-500/30 hover:to-blue-500/20 border border-blue-500/30 rounded-xl text-left text-xs font-bold text-blue-300 transition-all flex items-center gap-3">
                                    <svg className="w-4 h-4 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-3m0 0l7-4 7 4M5 9v10a1 1 0 001 1h12a1 1 0 001-1V9m-9 11l4-4" /></svg>
                                    Main Dashboard
                                </a>
                            </div>

                            <div className="mt-6 p-6 bg-cyan-500/5 rounded-2xl border border-cyan-500/20">
                                <div className="flex items-center gap-2 mb-2">
                                    <Info size={14} className="text-cyan-400" />
                                    <span className="text-[10px] font-bold uppercase text-cyan-400">Architect Note</span>
                                </div>
                                <p className="text-[10px] leading-relaxed text-blue-200/60 italic">
                                    "We are no longer building machines; we are tuning the infrastructure of the void."
                                </p>
                            </div>
                        </nav>

                        {/* Main Workspace */}
                        <main className="flex-grow p-6 md:p-12 overflow-y-auto">
                            <header className="mb-12 flex justify-between items-start">
                                <div>
                                    <p className="text-[10px] uppercase tracking-widest text-cyan-400 font-black mb-1">Developer Framework v1.0</p>
                                    <h2 className="text-4xl font-black text-white capitalize">{activeTab.replace('-', ' ')}</h2>
                                </div>
                                <div className="flex gap-2">
                                    <div className="bg-white/5 p-2 rounded-lg border border-white/10">
                                        <Gauge size={18} className="text-blue-400" />
                                    </div>
                                    <div className="bg-white/5 p-2 rounded-lg border border-white/10">
                                        <Database size={18} className="text-blue-400" />
                                    </div>
                                </div>
                            </header>

                            <div className="bg-white/5 backdrop-blur-xl rounded-[2.5rem] border border-white/10 p-8 md:p-12 shadow-2xl">
                                {activeTab === 'lattice' && <LatticeLab />}
                                {activeTab === 'isp' && <ISPCalculator />}
                                {activeTab === 'casimir' && <CasimirSandbox />}
                            </div>

                            <footer className="mt-12 text-center opacity-20 text-[10px] uppercase tracking-[0.3em] font-bold">
                                Project Archive: Christopher Olds | Infrastructure of Reality
                            </footer>
                        </main>

                    </div>
                </div>
            );
        };

        // Render
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
