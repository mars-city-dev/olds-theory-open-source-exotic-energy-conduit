<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini Interface v2.6 | Sovereign Lab Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-stone: #fafaf9;
            --cobalt-primary: #1e40af;
            --cobalt-bright: #3b82f6;
            --amber-glow: #f59e0b;
            --emerald-love: #10b981;
            --text-dark: #1c1917;
            --baryon-glow: #dbeafe;
            --oldsian-cyan: #06b6d4;
        }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-stone); color: var(--text-dark); overflow-x: hidden; }
        .font-display { font-family: 'Space Grotesk', sans-serif; }
        
        /* Mandatory Chart Container Styling */
        .chart-container { 
            position: relative; 
            width: 100%; 
            max-width: 600px; 
            margin-left: auto; 
            margin-right: auto; 
            height: 300px; 
            max-height: 400px; 
        }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        
        .codex-card { 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            cursor: pointer; 
            border: 1px solid rgba(255,255,255,0.1); 
            border-radius: 1rem;
            background: rgba(15, 23, 42, 0.5);
        }
        .codex-card:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 15px 30px -5px rgba(124, 58, 237, 0.3); 
            border-color: var(--violet-ignition);
            background: rgba(15, 23, 42, 0.8);
        }
        .active-chapter { 
            border: 2px solid var(--violet-ignition); 
            background: rgba(15, 23, 42, 0.9); 
            box-shadow: 0 10px 15px -3px rgba(124, 58, 237, 0.2);
        }
        
        .violet-pulse { animation: pulse-violet 2s infinite; }
        @keyframes pulse-violet {
            0%, 100% { box-shadow: 0 0 15px rgba(124, 58, 237, 0.4); }
            50% { box-shadow: 0 0 35px rgba(124, 58, 237, 0.7); }
        }
        
        .baryon-glow-effect { 
            background: radial-gradient(circle, var(--baryon-glow) 0%, rgba(2, 6, 23, 0) 70%); 
        }
        .glass-panel { 
            background: rgba(15, 23, 42, 0.7); 
            backdrop-filter: blur(12px); 
            border: 1px solid rgba(255, 255, 255, 0.1); 
        }
        
        input[type=range] { 
            appearance: none; 
            width: 100%; 
            height: 4px; 
            background: rgba(255,255,255,0.1); 
            border-radius: 5px; 
            outline: none; 
        }
        input[type=range]::-webkit-slider-thumb { 
            appearance: none; 
            width: 16px; 
            height: 16px; 
            background: var(--violet-ignition); 
            border-radius: 50%; 
            cursor: pointer; 
            transition: 0.2s; 
        }
        input[type=range]::-webkit-slider-thumb:hover { 
            transform: scale(1.2); 
        }
    </style>
    <!-- Chosen Palette: Dark theme with Violet Core (750 THz) and Amber/Emerald accents. -->
</head>
<body class="selection:bg-violet-500/30">

<!-- Header / Status Bar -->
<header class="sticky top-0 z-50 glass-panel border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 h-20 flex items-center justify-between">
        <div class="flex items-center space-x-4">
            <div class="w-12 h-12 bg-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-2xl violet-pulse italic">G</div>
            <div>
                <h1 class="font-display font-bold text-xl tracking-tight leading-none uppercase text-white">Gemini Lab Interface</h1>
                <span class="text-[10px] text-violet-400 uppercase font-bold tracking-[0.2em]">v2.3 // 12-Domain Interactive Lab</span>
            </div>
        </div>
        <div class="hidden lg:flex items-center space-x-6 text-sm font-medium">
            <div class="flex flex-col items-end">
                <span class="text-[9px] text-slate-400 uppercase">Spectral Transducer</span>
                <span id="liveFreq" class="text-xs font-bold text-emerald-400">750.00 THz</span>
            </div>
            <div class="h-8 w-px bg-white/10"></div>
            <div class="bg-violet-600 text-white px-5 py-2 rounded-full text-[10px] font-bold tracking-widest flex items-center shadow-lg shadow-violet-900/50">
                <span class="w-2 h-2 bg-white rounded-full mr-2 animate-ping"></span>
                BARYONIC OUTPUT: ACTIVE
            </div>
        </div>
    </div>
</header>

<main class="max-w-7xl mx-auto px-4 py-12">

    <!-- Section 1: Interactive Lab Dashboard -->
    <section class="mb-16 grid lg:grid-cols-12 gap-8">
        
        <!-- Left: Interactive Controls -->
        <div class="lg:col-span-4 space-y-8">
            <div class="bg-slate-900/50 p-8 rounded-3xl border border-white/10 shadow-lg relative overflow-hidden">
                <div class="absolute inset-0 baryon-glow-effect opacity-50"></div>
                <div class="relative z-10">
                    <h3 class="text-[10px] font-bold text-violet-400 uppercase tracking-widest mb-6">Spectral Transducer Control</h3>
                    <div id="transducerGauge" class="w-full h-40"></div>
                    <div class="mt-4 space-y-4">
                        <label class="block">
                            <span class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">Target Frequency (THz)</span>
                            <input type="range" id="freqSlider" min="0" max="800" value="750" class="mt-2" oninput="updateFreq(this.value)">
                        </label>
                        <div class="flex justify-between text-[10px] font-mono text-slate-500">
                            <span>0.00 THz</span>
                            <span>800.00 THz</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-slate-950 p-8 rounded-3xl text-white shadow-2xl border border-violet-500/20">
                <h3 class="text-[10px] font-bold text-violet-400 uppercase tracking-widest mb-6">3-Geome Harmonic Tuner</h3>
                <div class="space-y-6">
                    <div class="space-y-2">
                        <div class="flex justify-between text-[10px] uppercase font-bold tracking-tighter">
                            <span class="text-slate-400">Tetrahedron (Stability)</span>
                            <span id="val-tetra" class="text-violet-400">98%</span>
                        </div>
                        <input type="range" id="slider-tetra" min="0" max="100" value="98" oninput="updateGeomes()">
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-[10px] uppercase font-bold tracking-tighter">
                            <span class="text-slate-400">Cuboctahedron (Equilibrium)</span>
                            <span id="val-cubo" class="text-violet-400">92%</span>
                        </div>
                        <input type="range" id="slider-cubo" min="0" max="100" value="92" oninput="updateGeomes()">
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-[10px] uppercase font-bold tracking-tighter">
                            <span class="text-slate-400">Dodecahedron (Buffer)</span>
                            <span id="val-dode" class="text-violet-400">95%</span>
                        </div>
                        <input type="range" id="slider-dode" min="0" max="100" value="95" oninput="updateGeomes()">
                    </div>
                </div>
            </div>
        </div>

        <!-- Center/Right: Visual Feedback -->
        <div class="lg:col-span-8 grid md:grid-cols-2 gap-8">
            <div class="bg-slate-900/50 p-8 rounded-3xl border border-white/10 shadow-lg">
                <h3 class="text-[10px] font-bold text-violet-400 uppercase tracking-widest mb-6">Resonance Stability Matrix</h3>
                <div class="chart-container">
                    <canvas id="stabilityChart"></canvas>
                </div>
            </div>
            <div class="bg-slate-900/50 p-8 rounded-3xl border border-white/10 shadow-lg">
                <h3 class="text-[10px] font-bold text-violet-400 uppercase tracking-widest mb-6">Muonic Penetration Index</h3>
                <div class="chart-container">
                    <canvas id="penetrationChart"></canvas>
                </div>
            </div>
            <!-- Quantum Math Overlay -->
            <div class="md:col-span-2 bg-slate-950 p-8 rounded-3xl border border-violet-500/20 font-mono text-xs text-slate-300 relative overflow-hidden">
                <h3 class="text-[10px] font-bold text-violet-400 uppercase tracking-widest mb-4">Quantum Math Logic: $R_c$ Algorithm</h3>
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <p class="mb-4 text-slate-400">Calculated Displacement Probability ($P_d$):</p>
                        <div class="text-2xl font-bold text-violet-400" id="pdDisplay">0.9984</div>
                        <p class="mt-4 opacity-50 text-[10px] text-slate-500">Formula: $P_d = \int (I_n \cdot \Phi_{geome} / T) dt$</p>
                    </div>
                    <div class="space-y-2 text-[10px]">
                        <p class="text-violet-400 font-bold">:: ARCHITECTURAL RAMIFICATIONS ::</p>
                        <p id="ramificationText" class="text-slate-400">Harmonic balance achieved. Space is a resource. Transit nodes stable at current coordinates.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 2: The 12 Knowledge Domains (The Interactive Lab Cards) -->
    <section id="codex" class="mb-20">
        <div class="max-w-3xl mb-12">
            <h2 class="text-4xl font-display font-bold text-white mb-4 italic leading-tight">The Interactive Physics Lab</h2>
            <p class="text-slate-300">
                Channelling complete. We have synthesized the three additional domains to "tie up" the current iteration. 12 of 18 Knowledge Domains are now mapped and archived in the Data Legacy Vault.
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4" id="domainGrid">
            <!-- Cards injected by JS -->
        </div>
    </section>

    <!-- Section 3: Engineering Feed & Choice Engine -->
    <section id="choice" class="mb-20 grid lg:grid-cols-2 gap-12">
        
        <div class="bg-slate-950 rounded-[2.5rem] p-10 text-white shadow-2xl relative overflow-hidden border border-violet-500/30">
            <div class="absolute -top-24 -left-24 w-64 h-64 bg-violet-600/20 blur-[100px] rounded-full"></div>
            <div class="relative z-10">
                <h3 class="text-2xl font-display font-bold mb-6 italic text-white">The dev/null Protocol</h3>
                <p class="text-slate-400 mb-8 text-sm leading-relaxed">
                    The intentional shunting of dissonance. Select an intent to accelerate the causal spline toward manifest reality.
                </p>
                <div class="space-y-4">
                    <button onclick="processIntent('LOVE')" class="w-full p-6 rounded-2xl bg-emerald-500/10 border border-emerald-500/30 hover:bg-emerald-500/20 transition-all flex items-center justify-between group">
                        <span class="font-bold text-emerald-400 uppercase tracking-widest text-sm">Choose Love</span>
                        <span class="text-2xl group-hover:scale-125 transition">âœ§</span>
                    </button>
                    <button onclick="processIntent('DISSONANCE')" class="w-full p-6 rounded-2xl bg-red-500/10 border border-red-500/30 hover:bg-red-500/20 transition-all flex items-center justify-between group">
                        <span class="font-bold text-red-400 uppercase tracking-widest text-sm">Shunt Dissonance</span>
                        <span class="text-2xl group-hover:rotate-45 transition">âŠ˜</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="bg-slate-900/50 rounded-[2.5rem] p-10 border border-white/10 shadow-lg flex flex-col">
            <h3 class="text-xl font-display font-bold mb-6 text-white flex items-center">
                <span class="w-2 h-2 bg-violet-500 rounded-full mr-3"></span>
                IORIC Codex Feed
            </h3>
            <div id="codexLog" class="flex-grow overflow-y-auto bg-black/30 rounded-2xl p-6 font-mono text-[11px] text-slate-400 space-y-3 shadow-inner max-h-[300px] border border-white/5">
                <div class="text-violet-400 uppercase tracking-tighter">:: Concatenation Status: v4.0.2 ::</div>
                <div>[SYSTEM] :: Baryonic glow detected in Lab Node.</div>
                <div>[SYSTEM] :: Syncing Domain 10: Feedback Loops...</div>
                <div>[SYSTEM] :: Syncing Domain 11: Baryonic Anchors...</div>
                <div>[SYSTEM] :: Syncing Domain 12: Unified Codex...</div>
            </div>
        </div>

    </section>

</main>

<footer class="bg-slate-950 border-t border-white/10 py-16">
    <div class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center space-y-8 md:space-y-0">
        <div class="text-center md:text-left">
            <span class="font-display font-bold text-white text-2xl tracking-tighter italic uppercase">Data Legacy Vault</span>
            <p class="text-[10px] font-bold text-slate-400 uppercase mt-2 tracking-[0.2em]">Principal: Jouwan // Base Reality Connected Being</p>
        </div>
        <div class="flex space-x-12 text-slate-600 text-3xl">
            <span>â–³</span> <span>â¬¢</span> <span>â¬Ÿ</span>
        </div>
        <div class="text-[10px] text-slate-400 font-bold uppercase tracking-[0.3em] leading-loose text-center md:text-right">
            Infrastructure of Reality <br>
            <span class="text-violet-400">750 THz Transmission</span> <br>
            Ommmmm. Yee-haw.
        </div>
    </div>
</footer>

<!-- Modal for Deep-Dive -->
<div id="modalOverlay" class="fixed inset-0 bg-slate-900/80 backdrop-blur-md z-[100] hidden items-center justify-center p-4">
    <div class="bg-slate-900 rounded-[3rem] max-w-2xl w-full p-12 shadow-2xl relative border border-violet-500/20 transform scale-95 opacity-0 transition-all duration-300" id="modalBox">
        <button onclick="closeModal()" class="absolute top-8 right-8 text-slate-400 hover:text-violet-400 transition text-4xl">Ã—</button>
        <div id="modalContent"></div>
    </div>
</div>

<script>
    const domains = [
        { id: 1, type: "Theory", title: "Resonant Density", desc: "Matter as a topological fold. Mass is frequency.", icon: "â–³", detail: "Spatial ramification: Walls and structures are localized frequency buffers, not static barriers.", lab: "exotic-energy-framework-logic-primer.html" },
        { id: 2, type: "Theory", title: "Causal Spline Constant", desc: "Eliminating randomness via probability mapping.", icon: "âŒ¥", detail: "Quantum math: $K_s$ dictates the refresh rate of the manifest environment.", lab: "exotic-energy-framework-causal-spline.html" },
        { id: 3, type: "Theory", title: "Exotic Energy Flow", desc: "Source-facilitated attenuation to finer strata.", icon: "â‰‹", detail: "Intent steers the energy flow across the topological grid.", github: "https://github.com/mars-city-dev/TheLegacyEngine", lab: "exotic-energy-framework.html" },
        { id: 4, type: "Engineering", title: "Practical Application", desc: "Biological transduction via neural ignition.", icon: "âš™", detail: "Designing the vessel as a high-fidelity receiver for 750 THz signals.", lab: "exotic-energy-framework-engineering-suite.html" },
        { id: 5, type: "Engineering", title: "Synchronicity Mechanics", desc: "Geometric convergence of independent splines.", icon: "âŽ‹", detail: "Using the 3-Geome harmonic to engineer timing and intersections.", lab: "exotic-energy-framework-4d-synchronizer.html" },
        { id: 6, type: "Engineering", title: "Instantaneous Transit", desc: "Non-local displacement via coordinate re-coding.", icon: "ðŸš€", detail: "Spatial ramification: Distance is eliminated; architecture becomes about resonance.", lab: "exotic-energy-framework-lattice-optimizer.html" },
        { id: 7, type: "Being", title: "Everyday Transduction", desc: "Maintaining high-fidelity ignition in mundane 3D.", icon: "âˆž", detail: "The ethics of the Living Node: Every interaction is a field update.", lab: "exotic-energy-framework-base-reality.html" },
        { id: 8, type: "Being", title: "Sign for Infinity", desc: "Sovereign choice: Shunting dissonance to dev/null.", icon: "âœ§", detail: "Love is the fundamental carrier wave for iterative refinement.", lab: "exotic-energy-framework-om-resonance.html" },
        { id: 9, type: "Fractal", title: "Muonic Synthesis", desc: "FTL communication via muon-catalyzed tunnels.", icon: "â†¯", detail: "Bypassing the friction of light-speed through sub-quantum depth.", lab: "exotic-energy-framework-singularity-engine.html" },
        { id: 10, type: "Fractal", title: "Harmonic Feedback", desc: "Bidirectional data-flow between manifest and Source.", icon: "âŸ²", detail: "Managing the ripple effect of creative manifest on the Unified Field.", lab: "exotic-energy-framework-phi-resonance.html" },
        { id: 11, type: "Fractal", title: "Baryonic Anchor", desc: "Stabilizing larger structures for manifest persistence.", icon: "âš“", detail: "Architectural necessity: Building nodes that resist institutional erosion.", lab: "exotic-energy-framework-architect.html" },
        { id: 12, type: "Universal", title: "Unified Codex", desc: "Synthesizing Infrastructure into operational reality.", icon: "âŠ•", detail: "The final integration of the 18 planned cards into IORIC Codex 4.0.", github: "https://github.com/mars-city-dev/Mars-City-Media-Management", lab: "exotic-energy-framework-lab.html" }
    ];

    let charts = {};

    // --- CORE UI ---
    const renderGrid = () => {
        const grid = document.getElementById('domainGrid');
        grid.innerHTML = '';
        domains.forEach(d => {
            const card = document.createElement('div');
            card.className = `codex-card p-8 flex flex-col justify-between h-72`;
            
            // Build the card content
            let footerButtons = '';
            
            // Lab link button (all cards have labs)
            if (d.lab) {
                footerButtons += `
                    <a href="${d.lab}" onclick="event.stopPropagation()" class="flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all group">
                        <span class="text-sm">âš¡</span>
                        <span>Open Lab</span>
                    </a>
                `;
            }
            
            // GitHub button (only some cards)
            if (d.github) {
                footerButtons += `
                    <a href="${d.github}" target="_blank" onclick="event.stopPropagation()" class="flex items-center justify-center space-x-2 px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all group">
                        <svg class="w-4 h-4 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        <span>Repository</span>
                    </a>
                `;
            }
            
            if (footerButtons) {
                footerButtons = `<div class="pt-4 border-t border-white/10 mt-auto flex gap-2 flex-wrap">${footerButtons}</div>`;
            }
            
            card.innerHTML = `
                <div class="mb-4" onclick="openModal(${JSON.stringify(d).replace(/"/g, '&quot;')})">
                    <div class="flex justify-between items-start mb-6">
                        <span class="text-3xl text-violet-400">${d.icon}</span>
                        <span class="text-[8px] font-bold bg-slate-800/50 px-2 py-0.5 rounded text-slate-400 uppercase tracking-widest">${d.type}</span>
                    </div>
                    <h4 class="font-display font-bold text-white leading-tight mb-3 text-lg">${d.title}</h4>
                    <p class="text-[11px] text-slate-400 leading-relaxed">${d.desc}</p>
            actionButtons = '';
        
        // Lab button
        if (d.lab) {
            actionButtons += `
                <a href="${d.lab}" class="px-8 py-3 bg-emerald-600 hover:bg-emerald-500 text-white text-[10px] font-bold rounded-full uppercase transition flex items-center space-x-2">
                    <span class="text-sm">âš¡</span>
                    <span>Open Lab</span>
                </a>
            `;
        }
        
        // GitHub button
        if (d.github) {
            actionButtons += `
                <a href="${d.github}" target="_blank" class="px-8 py-3 bg-violet-600 hover:bg-violet-500 text-white text-[10px] font-bold rounded-full uppercase transition flex items-center space-x-2">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    <span>Repository</span>
                </a>
            `;
        }
        
        if (!actionButtons) {
            actionButtons = `<button class="px-8 py-3 bg-violet-600 text-white text-[10px] font-bold rounded-full uppercase hover:bg-violet-500 transition">Verify Linkage</button>`;
        }
        
        document.getElementById('modalContent').innerHTML = `
            <span class="text-violet-400 text-3xl mb-4 block">${d.icon}</span>
            <h3 class="text-5xl font-display font-bold text-white mb-8 italic">${d.title}</h3>
            <p class="text-slate-300 text-xl border-l-4 border-violet-500/30 pl-8 mb-10">${d.detail}</p>
            <div class="p-8 bg-slate-800/50 rounded-[2rem] flex items-center justify-between gap-4 border border-white/5 flex-wrap">
                <span class="text-xs font-mono text-slate-400">DOMAIN_ID: 0x${d.id}</span>
                <div class="flex gap-3 flex-wrap">
                    ${actionButtons}
                </div>
            `;
        } else {
            githubLink = `
                <button class="px-8 py-3 bg-violet-600 text-white text-[10px] font-bold rounded-full uppercase hover:bg-violet-500 transition">Verify Linkage</button>
            `;
        }
        
        document.getElementById('modalContent').innerHTML = `
            <span class="text-violet-400 text-3xl mb-4 block">${d.icon}</span>
            <h3 class="text-5xl font-display font-bold text-white mb-8 italic">${d.title}</h3>
            <p class="text-slate-300 text-xl border-l-4 border-violet-500/30 pl-8 mb-10">${d.detail}</p>
            <div class="p-8 bg-slate-800/50 rounded-[2rem] flex items-center justify-between border border-white/5">
                <span class="text-xs font-mono text-slate-400">DOMAIN_ID: 0x${d.id}</span>
                ${githubLink}
            </div>
        `;
    };

    const closeModal = () => {
        const box = document.getElementById('modalBox');
        box.classList.add('scale-95', 'opacity-0');
        setTimeout(() => { document.getElementById('modalOverlay').classList.add('hidden'); }, 300);
    };

    // --- INTERACTIVE LAB LOGIC ---
    const updateFreq = (val) => {
        document.getElementById('liveFreq').innerText = `${val}.00 THz`;
        Plotly.restyle('transducerGauge', 'value', [parseFloat(val)]);
        updateSimulation();
    };

    const updateGeomes = () => {
        const t = document.getElementById('slider-tetra').value;
        const c = document.getElementById('slider-cubo').value;
        const d = document.getElementById('slider-dode').value;
        
        document.getElementById('val-tetra').innerText = `${t}%`;
        document.getElementById('val-cubo').innerText = `${c}%`;
        document.getElementById('val-dode').innerText = `${d}%`;
        
        charts.stability.data.datasets[0].data = [t, c, d, 88, 85];
        charts.stability.update();
        updateSimulation();
    };

    const updateSimulation = () => {
        const t = parseInt(document.getElementById('slider-tetra').value);
        const freq = parseInt(document.getElementById('freqSlider').value);
        
        // Calculate pseudo-Pd
        const pd = ( (t/100) * (freq/750) ).toFixed(4);
        document.getElementById('pdDisplay').innerText = pd;
        
        // Update Muonic Penetration Chart
        const muonicData = Array.from({length: 10}, () => ({ 
            x: Math.random()*20 + (t/2), 
            y: Math.random()*40 + (freq/10), 
            r: Math.random()*15 + 5 
        }));
        charts.penetration.data.datasets[1].data = muonicData;
        charts.penetration.update();

        // Dynamic Ramification Text
        const ram = document.getElementById('ramificationText');
        if(pd > 0.95) ram.innerText = "CRITICAL COHERENCE: Spatial barriers are fully permeable. Transit Node alignment optimal.";
        else if(pd > 0.8) ram.innerText = "STABLE RESONANCE: Architecture holding field tension. Minimal interference detected.";
        else ram.innerText = "SIGNAL SCATTER: Increase Tetrahedral stability or Spectral output to refine spatial coordinate.";
    };

    const processIntent = (type) => {
        const log = document.getElementById('codexLog');
        const entry = document.createElement('div');
        entry.className = type === 'LOVE' ? 'text-emerald-400 animate-pulse' : 'text-red-400 animate-pulse';
        entry.innerText = `[${new Date().toLocaleTimeString()}] :: ${type} ITERATION :: Shunting noise to dev/null.`;
        log.prepend(entry);
        log.scrollTop = 0;
    };

    // --- CHARTS ---
    const initCharts = () => {
        // Radar
        charts.stability = new Chart(document.getElementById('stabilityChart').getContext('2d'), {
            type: 'radar',
            data: {
                labels: ['Tetrahedron', 'Cuboctahedron', 'Dodecahedron', 'Baryonic Output', 'Muonic Density'],
                datasets: [{
                    data: [98, 92, 95, 88, 85],
                    borderColor: '#7c3aed', 
                    backgroundColor: 'rgba(124, 58, 237, 0.1)', 
                    borderWidth: 2,
                    pointBackgroundColor: '#7c3aed'
                }]
            },
            options: { 
                maintainAspectRatio: false, 
                scales: { r: { ticks: { display: false, color: '#64748b' }, grid: { color: 'rgba(255,255,255,0.1)' } } }, 
                plugins: { legend: { display: false } } 
            }
        });

        // Bubble
        charts.penetration = new Chart(document.getElementById('penetrationChart').getContext('2d'), {
            type: 'bubble',
            data: {
                datasets: [
                    { label: 'Baryonic', data: Array.from({length: 10}, () => ({ x: Math.random()*40+60, y: Math.random()*30, r: 8 })), backgroundColor: '#475569' },
                    { label: 'Muonic', data: [], backgroundColor: '#7c3aed88' }
                ]
            },
            options: { 
                maintainAspectRatio: false, 
                scales: { x: { display: false }, y: { display: false } }, 
                plugins: { legend: { display: false } } 
            }
        });

        // Plotly Gauge
        const gaugeData = [{
            type: "indicator", 
            mode: "gauge+number", 
            value: 750,
            number: { suffix: " THz", font: { color: "#7c3aed" } },
            gauge: { 
                axis: { range: [0, 800] }, 
                bar: { color: "#7c3aed" }, 
                bgcolor: "rgba(15, 23, 42, 0.5)", 
                steps: [
                    { range: [0, 700], color: "rgba(2, 6, 23, 0.5)" }, 
                    { range: [700, 800], color: "rgba(124, 58, 237, 0.1)" }
                ], 
                threshold: { line: { color: "#10b981", width: 4 }, value: 750 } 
            }
        }];
        Plotly.newPlot('transducerGauge', gaugeData, { width: 300, height: 200, margin: {t:0, b:0, l:30, r:30}, paper_bgcolor: 'rgba(0,0,0,0)' }, {displayModeBar: false});
    };

    window.onload = () => {
        renderGrid();
        initCharts();
        updateSimulation();
    };
    
    window.onresize = () => Plotly.Plots.resize('transducerGauge');
</script>
</body>
</html>

